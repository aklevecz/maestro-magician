(()=>{"use strict";var t=function(){function t(t,e,n){this._node=null,this._config={childList:!0,subtree:!0},this._classNamePartial=t,this._callback=e,this._node=this._findNode(),this._observer=new MutationObserver(this._callback.bind(this)),this._startObserving(),new MutationObserver(this._resetObserver.bind(this)).observe(document.body,n||this._config)}return t.prototype._resetObserver=function(){this._stopObserving(),this._setNode(),this._startObserving()},t.prototype._findNode=function(){var t=document.evaluate("//div[contains(@class, '"+this._classNamePartial+"')]",document.body,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);return 1===t.snapshotLength?t.snapshotItem(0):(console.error("Error: Could not find the given node or there is more than one"),null)},t.prototype._setNode=function(){this._node=this._findNode()},t.prototype._startObserving=function(){this._node&&this._observer.observe(this._node,this._config)},t.prototype._stopObserving=function(){this._observer.disconnect()},t}();function e(t){this.message=t}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var n="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,r,o=0,s=0,a="";r=n.charAt(s++);~r&&(i=o%4?64*i+r:r,o++%4)?a+=String.fromCharCode(255&i>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function i(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return n(e)}}function r(t){this.message=t}r.prototype=new Error,r.prototype.name="InvalidTokenError";var o,s=function(t,e,n,i){t.innerText&&t.innerText.indexOf(e)>=0&&t.querySelectorAll(n).forEach((function(t){i(t)}))},a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t.BUTTON="button",t.INPUT="input"}(o||(o={}));var d={login:!1,signup:!1,loginButton:null,signupButton:null,confirmButton:null,emailOptin:!1},c=function(){function t(t){this.attrs=null,this._authenticated=!1,this._uiState=d,this._window=t;var e=this.getTokenFromStorage();e&&(this.attrs=e,this._authenticated=!0,this._userIdentify()),new MutationObserver(this.checkForUser.bind(this)).observe(document.body,{childList:!0,subtree:!0})}return t.prototype.getTokenFromStorage=function(){var e=Object.keys(localStorage).find((function(e){return e.includes(t.TOKEN_PARTIAL)}));if(e){var n=localStorage.getItem(e);if(n)return function(t,e){if("string"!=typeof t)throw new r("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(i(t.split(".")[n]))}catch(t){throw new r("Invalid token specified: "+t.message)}}(n)}return null},t.prototype.checkForUser=function(t){var e,n,i=this.getTokenFromStorage();i&&!this._authenticated?(this.attrs=i,this._authenticated=!0,this._userIdentify(),this._uiState.login&&(e=this.attrs.email,n=this.attrs.name,this._window.analytics.track("Account Logged In",{email:e,username:n})),this._uiState=d):i||(this._authenticated=!1,this.attrs=null,this._lookForModal(t))},t.prototype._lookForModal=function(e){for(var n=0,i=e;n<i.length;n++){var r=i[n].target.parentElement;r&&s(r,t.LOGIN_BUTTON_INNERTEXT,o.BUTTON,this._findLoginButton.bind(this))}},t.prototype._findLoginButton=function(e){e.innerText===t.LOGIN_BUTTON_INNERTEXT&&(this._uiState=a(a({},this._uiState),{login:!0,signup:!1,loginButton:e}))},t.prototype._userIdentify=function(){var t,e,n,i,r,o;this.attrs&&(t=this.attrs._id,e=this.attrs.created,n=this.attrs.email,i=this.attrs.marketingOptin,r=this.attrs.modified,o=this.attrs.name,this._window.analytics.identify(t,{createdAt:new Date(e),email:n,emailOptin:i,modifiedAt:r,username:o}),this._applyWindowVarsForOverlays())},t.prototype._applyWindowVarsForOverlays=function(){this.attrs&&(this._window.userDisplayName=this.attrs.name,this._window.userAccountId=this.attrs._id,this._window.userDisplayNameSavedTime=Date.now(),this._window.userEmail=this.attrs.email,this._window.modifiedAt=this.attrs.modified,this._window.service=this.attrs.service,this._window.roles=this.attrs.roles,this._window.siteId=this.attrs.siteId,this._window.created=this.attrs.created,this._window.iat=this.attrs.iat,this._window.exp=this.attrs.exp,this._window.subscriptions=this.attrs.subscriptions,this._window.uid=this.attrs.uid)},t.TOKEN_PARTIAL="accessToken",t.LOGIN_BUTTON_INNERTEXT="LOG IN",t}(),h="ADD TO CART",u=["QtyInputWrapper","StyledQuantity"],l=function(t){return t.style.display="none"},p=function(t){t.innerText===h&&l(t)},f=function(t){u.forEach((function(e){t.className.indexOf(e)>=0&&l(t)}))},_=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e].target.parentElement;i&&(s(i,h,"button",p),s(i,"Quantity","div",f))}},w=window;!function(t){var e=t.analytics=t.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var n=0;n<e.methods.length;n++){var i=e.methods[n];e[i]=e.factory(i)}e.load=function(t,n){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode&&r.parentNode.insertBefore(i,r),e._loadOptions=n},e._writeKey="cdDnxCrdkgjL2RKpMaDdEwRSm0NWuLNo",e.SNIPPET_VERSION="4.13.2"}e.load("cdDnxCrdkgjL2RKpMaDdEwRSm0NWuLNo")}(w),console.log("Magic will happen"),document.addEventListener("DOMContentLoaded",(function(){console.log("Making things disappear..."),new t("SidebarContainer",_),new c(w)}))})();